# üöÄ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è —É–ª—É—á—à–µ–Ω–∏–π –ø–æ–∏—Å–∫–∞

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:
- ‚úÖ –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –∑–∞–ø—É—à–µ–Ω
- ‚úÖ GEMINI_API_KEY –¥–æ–±–∞–≤–ª–µ–Ω –≤ Railway Variables
- ‚úÖ Backend –∑–∞–¥–µ–ø–ª–æ–µ–Ω

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ:
Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü–æ–¥—Ç—è–Ω–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥ –∏–∑ –≤–µ—Ç–∫–∏ `claude/improve-question-matching-01QxM9yU4XsMqkBMdawspgJQ`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`:
   - redis==5.0.1
   - pymorphy2==0.9.1
   - pymorphy2-dicts-ru==2.4.417127.4579844
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

---

## üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤–∞—à–µ–≥–æ backend –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
https://–≤–∞—à-backend.railway.app/docs

# –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –®–∞–≥ 2: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Slack –±–æ—Ç–∞

–ó–∞–¥–∞–π—Ç–µ –±–æ—Ç—É —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:

**–¢–µ—Å—Ç 1: –ó–∞—Ä–ø–ª–∞—Ç–∞**
```
‚úÖ "–ö–æ–≥–¥–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞?"
‚úÖ "–î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã –∑/–ø"
‚úÖ "–ö–∞–∫–æ–≥–æ —á–∏—Å–ª–∞ –ø–ª–∞—Ç—è—Ç?"
‚úÖ "–ö–æ–≥–¥–∞ –ø–æ–ª—É—á—É –∑–∞—Ä–ø–ª–∞—Ç—É?"
```

**–¢–µ—Å—Ç 2: –û—Ç–ø—É—Å–∫**
```
‚úÖ "–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –æ—Ç–ø—É—Å–∫?"
‚úÖ "–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–ø—É—Å–∫–Ω—ã—Ö"
‚úÖ "–ì–¥–µ –≤–∑—è—Ç—å –æ—Ç–ø—É—Å–∫?"
```

**–¢–µ—Å—Ç 3: –ë–æ–ª—å–Ω–∏—á–Ω—ã–π**
```
‚úÖ "–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –±–æ–ª—å–Ω–∏—á–Ω—ã–π?"
‚úÖ "–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –±–æ–ª—å–Ω–∏—á–Ω–æ–≥–æ –ª–∏—Å—Ç–∞"
‚úÖ "–ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –±–æ–ª–µ–∑–Ω–∏?"
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–í Railway Dashboard ‚Üí finwiki backend ‚Üí Logs

**–ò—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
‚úÖ "Redis connected successfully" - Redis —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏)
‚ö†Ô∏è  "Redis not available" - Redis –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
‚úÖ "Gemini Rate Limiter initialized: 10 RPM" - Rate limiter —Ä–∞–±–æ—Ç–∞–µ—Ç
```

**–û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å:**
```
‚ùå "Invalid API key" - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ GEMINI_API_KEY
‚ùå "Module not found: pymorphy2" - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Module not found: pymorphy2"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Railway –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π rebuild
1. Railway Dashboard ‚Üí Settings ‚Üí "Restart" —Å –≥–∞–ª–æ—á–∫–æ–π "Clear Cache"
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 2-3 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid API key"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GEMINI_API_KEY –≤ Variables
1. –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "AIza..."
2. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π: https://aistudio.google.com/app/apikey
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Slack –±–æ—Ç –¥–µ–ø–ª–æ–π
1. Railway Dashboard ‚Üí finbot backend ‚Üí Logs
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Connected to Slack" –∏–ª–∏ "Webhook server started"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API_URL –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö finbot
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Rate limit exceeded"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç Gemini API (250 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å)
# –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
1. –ü–æ–¥–æ–∂–¥–∞—Ç—å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è (—Å–±—Ä–æ—Å –≤ 00:00 Pacific Time)
2. –ò–ª–∏ upgrade –Ω–∞ Gemini Paid tier
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
- –í–æ–ø—Ä–æ—Å: "–ö–æ–≥–¥–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞?" ‚Üí ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- –¢–æ—á–Ω–æ—Å—Ç—å: ~70%
- –°–∫–æ—Ä–æ—Å—Ç—å: 500-1000ms

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
- –í–æ–ø—Ä–æ—Å: "–ö–æ–≥–¥–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞?" ‚Üí ‚úÖ –ù–∞–π–¥–µ–Ω–æ (–¥–∞–∂–µ –µ—Å–ª–∏ –≤ –±–∞–∑–µ "–î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã")
- –¢–æ—á–Ω–æ—Å—Ç—å: ~90%+
- –°–∫–æ—Ä–æ—Å—Ç—å: 50-100ms (–µ—Å–ª–∏ Redis) –∏–ª–∏ 500-1000ms (–±–µ–∑ Redis)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å Pull Request –≤ main
2. ‚úÖ Merge –≤ production
3. ‚úÖ –°–æ–±—Ä–∞—Ç—å feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ Railway
2. –ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç - –ø–æ–º–æ–≥—É —Ä–µ—à–∏—Ç—å
3. –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Backend Logs:** Railway ‚Üí finwiki backend ‚Üí Logs
- **Finbot Logs:** Railway ‚Üí finbot backend ‚Üí Logs
- **Swagger API:** https://–≤–∞—à-backend.railway.app/docs
- **Gemini API Key:** https://aistudio.google.com/app/apikey
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** /home/user/finwiki/IMPROVEMENTS.md

---

## Redis Setup (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Redis?
- ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤ (10x –±—ã—Å—Ç—Ä–µ–µ)
- üí∞ –≠–∫–æ–Ω–æ–º–∏—è Gemini API –ª–∏–º–∏—Ç–æ–≤
- üìä ~90% –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ø–∞–¥—É—Ç –≤ –∫—ç—à

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å Redis –≤ Railway:

1. **Railway Dashboard** ‚Üí –≤–∫–ª–∞–¥–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
2. **New Service** ‚Üí **Database** ‚Üí **Redis**
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `REDIS_URL`
4. **–í backend service Variables –¥–æ–±–∞–≤–∏—Ç—å:**
   ```
   REDIS_HOST=<–ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏>
   REDIS_PORT=6379
   ```
5. **Restart backend service**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Redis —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
# –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
‚úÖ "Redis connected successfully"
‚úÖ "Cache HIT for query: '–ö–æ–≥–¥–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞?'"
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. –ü—Ä–æ—Å—Ç–æ –∑–∞–¥–∞–π—Ç–µ –±–æ—Ç—É –≤–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç—ã –¥–∞–∂–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞–º–∏!

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã - –ø–∏—à–∏—Ç–µ! üöÄ
